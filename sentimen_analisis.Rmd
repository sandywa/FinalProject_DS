---
title: "ProjectDS"
author: "Sandy Wahyu Agusta (123190145) & Busroni Ahmad Safrizal (123190147)"
date: "12/9/2021"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

Poin 1. Import Library yang akan digunakan terlebih dahulu kemudian set data frame diambil dari dataset yang digunakan dalam kasus ini menggunakan reviews_shopee.csv pada folder yang sama.

```{r rlib}
library(tm)
library(wordcloud2)
library(vroom)
library(here)
library(RTextTools)
library(dplyr)
library(wordcloud)
library(shiny)
library(ggplot2)
library(plotly)
library(syuzhet)
library(e1071) 
library(caret) 

d <- read.csv("reviews_shopee.csv")
```

Poin 2. Sebelum mengolah data, tahapan yang perlu dilakukan adalah data preprocessing dengan membersihkan data data sehingga dapat dengan mudah dan lebih akurat ketika akan diolah. Mulai dari penghilangan URL, "\n", koma, RT, titik dua, titk koma, titk tiga, amp, dan symbol

```{r preprocessing dataset}

komentar <- d$ulasan
reviewC <- Corpus(VectorSource(komentar))
removeURL <- function(x) gsub("http[^[:space:]]*", "", x)
reviewclean <- tm_map(reviewC, removeURL)
removeNL <- function(y) gsub("\n", " ", y)
reviewclean <- tm_map(reviewclean, removeNL)
replacecomma <- function(y) gsub(",", "", y)
reviewclean <- tm_map(reviewclean, replacecomma)
removeRT <- function(y) gsub("RT ", "", y)
reviewclean <- tm_map(reviewclean, removeRT)
removetitik2 <- function(y) gsub(":", "", y)
reviewclean <- tm_map(reviewclean, removetitik2)
removetitikkoma <- function(y) gsub(";", " ", y)
reviewclean <- tm_map(reviewclean, removetitikkoma)
removetitik3 <- function(y) gsub("p…", "", y)
reviewclean <- tm_map(reviewclean, removetitik3)
removeamp <- function(y) gsub("&amp;", "", y)
reviewclean <- tm_map(reviewclean, removeamp)
removeUN <- function(z) gsub("@\\w+", "", z)
reviewclean <- tm_map(reviewclean, removeUN)
removesym <- function(y) gsub("ð", "", y)
reviewclean <- tm_map(reviewclean, removesym)
remove.all <- function(xy) gsub("[^[:alpha:][:space:]]*", "", xy)
reviewclean <- tm_map(reviewclean,remove.all)
reviewclean <- tm_map(reviewclean, removePunctuation)
reviewclean <- tm_map(reviewclean, tolower)

dataframe<-data.frame(text=unlist(sapply(reviewclean, `[`)), stringsAsFactors=F)
view(dataframe)
write.csv(dataframe,file = "dataPreProcessing.csv")